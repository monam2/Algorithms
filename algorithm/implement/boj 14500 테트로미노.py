#백준 14500 테트로미노

'''
일자 : 방향 두 개
네모 : 방향 x
니은자 : 방향 4개
꺾인거 : 방향 2개
우자 : 방향 4개

함수 : 사용할 테트로미노

'''
import sys
input = sys.stdin.readline

n,m = map(int, input().split())
graph = [list(map(int, input().split())) for _ in range(n)]
# long1 = [(0,0), (0,1), (0,2), (0,3)]
# long2 = [(0,0), (1,0), (2,0), (3,0)]
# nemo = [(0,0), (1,0), (0,1), (1,1)]
# ni1 = [(0,0), (1,0), (2,0), (2,1)]
# ni2 = [(0,0), (0,1), (0,2), (1,0)]
# ni3 = [(0,0), (0,1), (1,1), (2,1)]
# ni4 = [(0,0), (0,1), (0,2), (-1,2)]
# gu1 = [(0,0), (1,0), (1,1), (2,1)]
# gu2 = [(0,0), (0,1), (-1,1), (-1,2)]
# oo1 = [(0,0), (0,1), (0,2), (1,1)]
# oo2 = [(0,0), (0,1), (-1,1), (1,1)]
# oo3 = [(0,0), (0,1), (0,2), (-1,1)]
# oo4 = [(0,0), (1,0), (2,0), (1,1)]
shapes = [([1, 0], [2, 0], [3, 0]),
          ([0, 1], [0, 2], [0, 3]),
          ([1, 0], [0, 1], [1, 1]),
          ([0, 1], [1, 1], [1, 2]),
          ([0, 1], [-1, 1], [-1, 2]),
          ([1, 0], [1, 1], [2, 1]),
          ([1, 0], [1, -1], [2, -1]),
          ([0, 1], [1, 0], [2, 0]),
          ([0, 1], [1, 1], [2, 1]),
          ([1, 0], [2, 0], [2, 1]),
          ([1, 0], [2, 0], [2, -1]), 
          ([0, 1], [0, 2], [-1, 2]),
          ([0, 1], [0, 2], [1, 2]),
          ([1, 0], [1, 1], [1, 2]),
          ([-1, 0], [-1, 1], [-1, 2]),
          ([1, 0], [2, 0], [1, 1]),
          ([1, 0], [2, 0], [1, -1]),
          ([0, 1], [0, 2], [-1, 1]),
          ([0, 1], [0, 2], [1, 1])]

mx = 0
for i in range(n):
    for j in range(m):
        for tp in shapes:
            total = graph[i][j]
            for a, b in tp:
                x = i + a
                y = j + b
                if 0<=x<n and 0<=y<m:
                    total += graph[x][y]
                else:
                    break
            else:
                mx = max(mx, total)
print(mx)